<div class="reports-curriculum" data-test-reports-curriculum ...attributes>
  <div class="courses" data-test-courses>
    {{#if @selectedCourseIds}}
      <h2 class="title">{{t "general.selectedCourses"}}:</h2>
      <ul>
        {{#each (sort-by "title" this.selectedCourses) as |course|}}
          <li>
            <button
              class="link-button"
              type="button"
              {{on "click" (fn this.removeCourse course.id)}}
              data-test-selected-course
            >
              {{course.year}}&nbsp;
              {{#if course.externalId}}
                [{{course.externalId}}]&nbsp;
              {{/if}}
              {{course.title}}
              <FaIcon @icon="xmark" class="remove" />
            </button>
          </li>
        {{/each}}
      </ul>
    {{/if}}
  </div>
  {{#if this.reportResults}}
    <Reports::CourseReportResults
      @data={{this.reportResults}}
      @close={{set this "reportResults" null}}
    />
  {{else}}
    <div class="input-buttons">
      {{#unless this.reportResults}}
        <button
          type="button"
          class="done text"
          {{on "click" (perform this.run)}}
          disabled={{this.run.isRunning}}
          data-test-run
        >
          {{#if this.run.isRunning}}
            <LoadingSpinner />
          {{else}}
            {{t "general.runReport"}}
          {{/if}}
        </button>
      {{/unless}}
    </div>
    <Reports::ChooseCourse
      @selectedCourseIds={{@selectedCourseIds}}
      @schools={{@schools}}
      @add={{this.pickCourse}}
      @remove={{this.removeCourse}}
    />
  {{/if}}
</div>