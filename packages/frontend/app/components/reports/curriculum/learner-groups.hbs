<Reports::Curriculum::Header
  @selectedSchoolIds={{this.selectedSchoolIds}}
  @countSelectedCourses={{@courses.length}}
  @showReportResults={{true}}
  @loading={{this.reportRunning}}
  @selectedReportValue="learnerGroups"
  @changeSelectedReport={{(noop)}}
  @close={{@close}}
  @download={{perform this.downloadReport}}
  @finished={{this.finishedBuildingReport}}
/>
<div class="progress-container">
  {{#if this.reportRunning}}
    <progress
      value={{add 1 this.completedPromises.length}}
      max={{add 1 this.queryPromises.length}}
    ></progress>
  {{/if}}
</div>
<div class="report-results {{if this.reportRunning 'running'}}" data-test-report-results>
  <table>
    <caption>{{t "general.resultsSummary"}}</caption>
    <thead>
      <tr>
        {{#if this.hasMultipleSchools}}
          <th>{{t "general.school"}}</th>
        {{/if}}
        <th>{{t "general.course"}}</th>
        <th>{{t "general.sessions"}}</th>
        <th>{{t "general.instructors"}}</th>
        <th>{{t "general.learnerGroups"}}</th>
      </tr>
    </thead>
    <tbody>
      {{#if this.reportRunning}}
        {{#each (sort-by "courseTitle" @courses) as |c|}}
          <tr>
            {{#if this.hasMultipleSchools}}
              <td>{{11}}</td>
            {{/if}}
            <td>
              <LinkTo @route="course" @model={{c.id}}>
                {{c.title}}
              </LinkTo>
            </td>
            <td>{{5}}</td>
            <td>{{6}}</td>
            <td>{{81}}</td>
          </tr>
        {{/each}}
      {{else}}
        {{#each (sort-by "courseTitle" this.summary) as |o|}}
          <tr data-test-result>
            {{#if this.hasMultipleSchools}}
              <td>{{o.schoolTitle}}</td>
            {{/if}}
            <td>
              <LinkTo @route="course" @model={{o.courseId}}>
                {{o.courseTitle}}
              </LinkTo>
            </td>
            <td>{{o.sessionCount}}</td>
            <td>{{o.instructorsCount}}</td>
            <td>{{o.learnerGroupsCount}}</td>
          </tr>
        {{/each}}
      {{/if}}
    </tbody>
  </table>
</div>