<div
  class="school-curriculum-inventory-institution-manager"
  data-test-school-curriculum-inventory-institution-manager
  {{did-insert this.load}}
  {{did-update this.load @institution}}
  ...attributes
>
  <div
    data-test-school-curriculum-inventory-institution-manager-header
    class="school-curriculum-inventory-institution-manager-header"
  >
    <div class="title">
      {{t "general.curriculumInventoryInstitutionalInfo"}}
    </div>
    <div class="actions">
      {{#if @canUpdate}}
        <button type="button" class="bigadd" {{on "click" (perform this.save)}}>
          <FaIcon
            @icon={{if this.save.isRunning "spinner" "check"}}
            @spin={{this.save.isRunning}}
          />
        </button>
      {{/if}}
      <button type="button" class="bigcancel" {{on "click" (fn @manage false)}}>
        <FaIcon @icon="undo" />
      </button>
    </div>
  </div>
  <div
    data-test-school-curriculum-inventory-institution-manager-content
    class="school-curriculum-inventory-institution-manager-content"
  >
    <div class="form">
      <div class="item" data-test-institution-name>
        <label>
          {{t "general.schoolName"}}
        </label>
        <input
          type="text"
          value={{this.name}}
          {{on "input" (pick "target.value" (set this.name))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "name")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "name")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
      <div class="item" data-test-institution-aamc-code>
        <label>
          {{t "general.aamcSchoolId"}}
        </label>
        <input
          type="text"
          maxlength="5"
          value={{this.aamcCode}}
          {{on "input" (pick "target.value" (set this.aamcCode))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "aamcCode")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "aamcCode")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
      <div class="item" data-test-institution-address-street>
        <label>
          {{t "general.street"}}
        </label>
        <input
          type="text"
          value={{this.addressStreet}}
          {{on "input" (pick "target.value" (set this.addressStreet))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "addressStreet")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "addressStreet")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
      <div class="item" data-test-institution-address-city>
        <label>
          {{t "general.city"}}
        </label>
        <input
          type="text"
          value={{this.addressCity}}
          {{on "input" (pick "target.value" (set this.addressCity))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "addressCity")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "addressCity")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
      <div class="item" data-test-institution-address-state-or-province>
        <label>
          {{t "general.stateOrProvince"}}
        </label>
        <input
          type="text"
          value={{this.addressStateOrProvince}}
          {{on "input" (pick "target.value" (set this.addressStateOrProvince))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "addressStateOrProvince")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "addressStateOrProvince")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
      <div class="item" data-test-institution-address-zip-code>
        <label>
          {{t "general.zipCode"}}
        </label>
        <input
          type="text"
          value={{this.addressZipCode}}
          {{on "input" (pick "target.value" (set this.addressZipCode))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "addressZipCode")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "addressZipCode")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
      <div class="item" data-test-institution-address-country-code>
        <label>
          {{t "general.country"}}
        </label>
        <input
          type="text"
          maxlength="2"
          value={{this.addressCountryCode}}
          {{on "input" (pick "target.value" (set this.addressCountryCode))}}
          {{on "keyup"
            (queue
              (fn this.addErrorDisplayFor "addressCountryCode")
              (if @institution (perform this.saveOrCancel) (noop))
            )
          }}
        >
        {{#each (await (compute (fn this.getErrorsFor) "addressCountryCode")) as |message|}}
          <span class="validation-error-message">
            {{message}}
          </span>
        {{/each}}
      </div>
    </div>
  </div>
</div>
